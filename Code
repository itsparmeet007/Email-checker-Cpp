// Online C++ compiler to run C++ program online
#include <iostream>
#include <string.h>
using namespace std;

void showusernameRules() {
    cout << "\nðŸ”’ Username Validation Rules:\n";
    cout << "1. Must be at least 5 characters long\n";
    cout << "2. Must start with a letter\n";
    cout << "3. Can contain letters, digits, '_' and '.' only\n";
    cout << "4. Cannot start or end with '_' or '.'\n";
    cout << "5. Cannot contain consecutive special characters like '__' or '..'\n";
}
//Function to validate username
bool isvalidusername(const string & username){
    if (!isalpha(username[0]))
        return false;
    if (username.length() < 5 || username.length() >20)
        return false;
    for(size_t i =0 ; i < username.length(); ++i){
        char c =username[i];
        if(!(isalnum(c) ||c =='_'||c == '.'))
            return false;
        if (i > 0 && (username[i] == '_' || username[i] == '.') &&
            (username[i-1] == '_' || username[i-1] == '.'))
            return false;
    }
    if (username.front() == '_' || username.back() == '.'||
        username.front() == '.'||username.back() =='_')
        return false;
    return true;
}
int main() {
    while (true){
        string email;
        cout<<"Enter the email : ";
        getline(cin,email);
        
        int atIndex = email.find('@');
        if (atIndex == string::npos || atIndex == 0 || atIndex == email.length() - 1) {
            cout << "âŒ Invalid email format. '@' must be present and not at the start or end.\n";
            continue;
        }
        string username = email.substr(0,atIndex);
        
        if(isvalidusername(username)){
            cout<<"Valid Usernameâœ…â˜ºï¸ðŸ˜‰"<<endl;
            cout<<"Username : "<<username <<endl;
            break;
        }else{
            cout<<"Not a ValidâŒâŒemail plz go through it !!â˜ºï¸âœ…"
            <<endl;
            showusernameRules();
        }}
    return 0;
}
